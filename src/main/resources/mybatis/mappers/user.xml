<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="user">
	<insert id="insert" parameterType="uservo">
		<![CDATA[
		insert
		  into user
		values (null, #{email }, #{name }, #{password }, "/assets/profile/defaultProfile.png")
		]]>
		<selectKey keyProperty="no" resultType="long" order="AFTER">
			<![CDATA[
		  	select last_insert_id()
	  		]]>
	  	</selectKey>	
	</insert>
	
	<select id="findByEmailAndPassword" parameterType="uservo" resultType="uservo">
		<![CDATA[
			select no, email, name, profile from user where email=#{email } and password=#{password}
		]]>
	</select>
	
	<select id="checkEmail" parameterType="string" resultType="uservo">
		<![CDATA[
			select email from user where email=#{email }
		]]>
	</select>
	
	<update id="updateUser" parameterType="uservo">
		<![CDATA[
		update user
		 set name = #{name }, password = #{password } 
		where no = #{no }
		]]>
	</update>
	
	<update id="updateProfile" parameterType="uservo">
		<![CDATA[
		update user 
		 set profile = #{profile } 
		where no = #{no }
		]]>
	</update>
	
	<select id="checkPassword" parameterType="string" resultType="uservo">
		<![CDATA[
			select password from user where password=#{password }
		]]>
	</select>
	
</mapper>